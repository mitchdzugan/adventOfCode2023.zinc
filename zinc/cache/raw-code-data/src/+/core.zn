{:merge-state {:defreferred nil, :refer-macros nil, :name-alias nil, :placeholders nil, :get-dep-path {"+" "/home/mitch/Projects/adventOfCode2023.zinc/src/+/types.zn"}, :get-as-alias {"/home/mitch/Projects/adventOfCode2023.zinc/src/+/types.zn" "+"}, :exporting {"/home/mitch/Projects/adventOfCode2023.zinc/src/+/types.zn" true}, :runtime-deps {"/home/mitch/Projects/adventOfCode2023.zinc/src/+/types.zn" true}}, :res {:code [(require ' ["./types.mjs" :as + :exporting "*"]) (def- key-impls {}) (defn implement-key [type-id f] (aset key-impls type-id f)) (defn key [obj] ((aget key-impls (type-id obj)) obj)) (implement-key +/NumT +/id) (implement-key +/StrT +/id) (implement-key +/BoolT +/id) (+/implement-monad-plus +/NumT (fn [] (-> 0)) (fn [_anon%1_50 _anon%2_51] (+ _anon%1_50 _anon%2_51))) (+/implement-monad-plus +/StrT (fn [] (-> "")) +/str) (+/implement-monad-plus +/BoolT (fn [] (-> false)) (fn [_anon%1_52 _anon%2_53] (clojure.core/or _anon%1_52 _anon%2_53))) (+/implement-monad-plus +/VecT (fn [] (Vec)) (fn [_anon%1_54 _anon%2_55] (concat _anon%1_54 _anon%2_55))) (+/implement-monad-plus +/MaybeT (fn [] (-> None)) (fn [_anon%1_57 _anon%2_56] (maybe _anon%2_56 Just _anon%1_57))) (+/implement-applicative +/VecT (fn [_anon%1_58] (Vec _anon%1_58))) (+/implement-applicative +/MaybeT (fn [_anon%1_59] (Just _anon%1_59))) (+/implement-flatplicative-for-applicative +/VecT) (+/implement-flatplicative-for-applicative +/MaybeT) (+/implement-flatplicative +/StrT +/str) (+/implement-flatplicative +/BoolT (fn [_anon%1_60] (+/not (+/not _anon%1_60)))) (def MapClass +/MapClass) (defn Vec [& a-] (let [a (clojure.core/or a- []) id (+/mk-inst-id)] {:T +/VecT, :I id, :J (+/prop$ (+/apply +/argv +/VecT (.map a json))), :P (+/prop$ (.map a pretty)), :a a})) (defn Map [pairs] (new MapClass pairs)) (defn KeyMap [pairs] (let [ks (Map (.map pairs (fn [[k]] [(key k) k]))) vs (Map (.map pairs (fn [[k v]] [(key k) v]))) id (+/mk-inst-id)] {:T +/KeyMapT, :I id, :J (+/prop$ (+/js-array-from vs [+/KeyMapT] (fn [[kk v]] [(json (.get ks kk)) (json v)]))), :P (+/prop$ (pretty vs)), :ks ks, :vs vs})) (defn KeyedList [pairs] (let [id (+/mk-inst-id) kl {:I id, :P (+/prop$ (+/<<- (+/js-flat-array-from (.-a $) ["#:KeyedList"]) (fn [[id v]] [(+/str "#" id) (pretty v)]))), :J (+/prop$ (+/<<- (+/js-array-from (.-a $) [+/KeyedListT]) (fn [[id v]] [id (json v)]))), :T +/KeyedListT, :l nil, :d {}, :f nil, :i 1, :a (+/prop$ (let [res []] (loop [id (.-f $)] (if (+/nil? id) res (let [[v pid nid] (aget $ "d" id)] (.push res [id v]) (recur nid))))))} empty? (fn [_anon%1_61] (+/is 0 (+/js-length _anon%1_61)))] (doto kl (do (when-not (empty? pairs) (aset kl "f" (aget pairs 0 0)) (loop [[[nid nv :as next] & rest] pairs [cid cv :as curr] [] [pid pv :as prev] [] max-id 0] (when-not (+/nil? cid) (aset kl "d" cid [cv pid nid])) (if (not (empty? rest)) (recur rest next curr (+/max max-id nid)) (doto kl (aset "i" (inc max-id)) (aset "l" nid) (aset "d" nid [nv cid]))))))))) (defn- mkMaybe [j e] (let [id (+/mk-inst-id)] {:T +/MaybeT, :I id, :J (+/prop$ (if e [+/MaybeT +/null] [+/MaybeT (json j)])), :P (+/prop$ (if e +/null {:just (pretty j)})), :j j, :e e})) (defn Just [j] (mkMaybe j false)) (def None (mkMaybe nil true)) (defn Maybe [nilable] (mkMaybe nilable (+/nil? nilable))) (defn type-id [any] (.-T any)) (defn inst-id [any] (.-I any)) (defn json [any] (.-J any)) (defn pretty [any] (and any (.-P any))) (defn- coll-impl [spec obj] ((clojure.core/or (aget spec (type-id obj)) (aget spec +/else)))) (defn Range [& args] (let [[a1 a2 a3] args fin (fn [init end step] (+/apply Vec (js/Array.from (js/Array (+/ceil (+/div (- end init) step))) (fn [_anon%1_63 _anon%2_62] (+ init (* step _anon%2_62))))))] (cond (+/nil? a1) (Vec) (+/nil? a2) (fin 0 a1 (if (>= a1 0) 1 -1)) (+/nil? a3) (fin a1 a2 (if (>= a2 a1) 1 -1)) :else (fin a1 a2 a3)))) (defn at (defn-impl$ [$ k] ([+/VecT] (Maybe (aget $ "a" k))) ([+/MapT] (Maybe (.get $ k))) ([+/KeyMapT] (Maybe ((.. $ -vs -get) (key k)))) ([+/KeyedListT] (fmap (fn [_anon%1_64] (aget _anon%1_64 0)) (Maybe (aget $ "d" k)))) ([+/MaybeT] (if (or (not= 0 k) (.-e $)) None $)))) (defn put (defn-impl$ [$ k v] ([+/VecT] (aset $ "a" k v)) ([+/MapT] (.set $ k v)) ([+/KeyMapT] (let [kk (key k)] (.set (.-ks $) kk k) (.set (.-vs $) kk v))) ([+/KeyedListT] "TODO"))) (defn for-each-map [f m get-js-m map-key] (.forEach (+/js-array-from (get-js-m m) (fn [[k v]] (fn [] (f v (map-key k) m)))) (fn [_anon%1_65] (_anon%1_65)))) (defn each (defn-impl$ [f $] ([+/VecT] ((.. $ -a -forEach) (fn [_anon%1_66 _anon%2_67] (f _anon%1_66 _anon%2_67 $)))) ([+/MapT] (for-each-map f $ +/id +/id)) ([+/KeyMapT] (for-each-map f $ (fn [_anon%1_68] (.-vs _anon%1_68)) (fn [_anon%1_69] ((.. $ -ks -get) _anon%1_69)))) ([+/MaybeT] (when-not (.-e $) (f (.-j $) 0 $))) ([+/KeyedListT] ((.. $ -a forEach (fn [[id v] ind] (f v id $ ind))))))) (defn reduce [f init coll] (let [res [init]] (each (fn [_anon%1_70 _anon%2_71 _anon%3_72 _anon%4_73] (aset res 0 (f (aget res 0) _anon%1_70 _anon%2_71 _anon%3_72 _anon%4_73))) coll) (aget res 0))) (defn fmap (defn-impl$ [f $] ([+/VecT] (+/apply Vec ((.. $ -a -map) (fn [_anon%1_74 _anon%2_75] (f _anon%1_74 _anon%2_75 $))))) ([+/MapT] (Map (+/js-array-from $ (fn [[k v]] [k (f v k $)])))) ([+/MaybeT] (if (.-e $) $ (Just (f (.-j $) 0 $)))))) (defn bind (defn-impl$ [f $] ([+/VecT] (+/apply Vec ((.. $ -a -flatMap) (fn [_anon%1_76 _anon%2_77] (.-a (f _anon%1_76 _anon%2_77 $)))))) ([+/MaybeT] (if (.-e $) $ (f (.-j $) 0 $))))) (defn concat [...args] (bind +/id (+/apply Vec args))) (defn filter (defn-impl$ [p $] ([+/VecT] (+/apply Vec ((.. $ -a -filter) (fn [_anon%1_78 _anon%2_79] (p _anon%1_78 _anon%2_79 $))))) ([+/MaybeT] (if (clojure.core/or (.-e $) (p (.-j $) 0 $)) $ None)))) (defn remove [p coll] (filter (fn [_anon%1_80 _anon%2_81 _anon%3_82] (+/not (p _anon%1_80 _anon%2_81 _anon%3_82))) coll)) (defn keys (defn-impl$ [$] ([+/VecT] (Range (+/js-length (.-a $)))) ([+/MapT] (+/apply Vec (+/js-array-from $ (fn [_anon%1_83] (aget _anon%1_83 0))))) ([+/KeyMapT] (vals (.-ks $))) ([+/MaybeT] (if (.-e $) (Vec) (Vec 0))))) (defn vals (defn-impl$ [$] ([+/VecT] (+/apply Vec (.-a $))) ([+/MapT] (+/apply Vec (+/js-array-from $ (fn [_anon%1_84] (aget _anon%1_84 1))))) ([+/KeyMapT] (vals (.-vs $))) ([+/MaybeT] (if (.-e $) (Vec) (Vec (.-j $)))))) (defn size (defn-impl$ [$] ([+/VecT] (+/js-length (.-a $))) ([+/MapT] (.. $ -size)) ([+/KeyMapT] (size (.-ks $))) ([+/MaybeT] (if (.-e $) 0 1)))) (defn or- (defn-impl$ [mk-default-val $] ([+/MaybeT] (if (.-e $) (mk-default-val) (.-j $))))) (defn or [default-val m] (or- (fn [] default-val) m)) (defn maybe- (defn-impl$ [on-none on-just $] ([+/MaybeT] (if (.-e $) (on-none) (on-just (.-j $)))))) (defn maybe [none on-just m] (maybe- (fn [] none) on-just m)) (defn insert (defn-impl$ [$ target-id v] ([+/VecT] (if (>= target-id (size $)) None (do (.splice $ target-id 0 v) (Just target-id)))) ([+/MapT] (fmap (fn [] (do (put $ target-id v) target-id)) (at $ target-id))) ([+/KeyMapT] (let [kk (key target-id)] (fmap (fn [] (do (put (.-ks $) kk v) (put (.-vs $) kk v) kk)) (at (.-ks $) kk)))) ([+/KeyedListT] (let [id (aget $ "i") prepend (aget $ "d" target-id)] (if (nil? prepend) None (let [[pid] (aget prepend 1)] (doto $ (amod "n" inc) ((if (+/nil? pid) (fn [_anon%1_85] (aset _anon%1_85 "f" pid)) (fn [_anon%1_86] (aset _anon%1_86 "d" pid 2 id)))) (aset _anon%1_87 "d" target-id 1 id) (aset _anon%1_87 "d" id [v pid target-id])) (Just id))))))) (defn unshift (defn-impl$ [$ v] ([+/VecT] (.unshift (.-a $) v)) ([+/KeyedListT] (insert $ (.-f $) v)))) (defn sort (defn-impl$ [$ v] ([+/VecT] (let [res (+/apply Vec (.-a $))] (.sort (.-a res)) res)))) (defn empty? [c] (+/is 0 (size c))) (defn unjson [v] (let [unjson-pairs (fn [[k v]] [(unjson k) (unjson v)])] (cond (+/js-array? v) ((-> {[+/MaybeT] (fn [] (fmap unjson (Maybe (aget v 1)))), [+/VecT] (fn [] (fmap unjson (+/apply Vec (.slice v 1)))), [+/MapT] (fn [] (Map (.map unjson-pairs (.slice v 1)))), [+/KeyMapT] (fn [] (KeyMap (.map unjson-pairs (.slice v 1))))} (aget (type-id v)) (or (fn [] (.map v unjson))))) (aget {[+/StrT] true, [+/NumT] true, [+/BoolT] true} (and v (type-id v))) v :else (throw (+/str "Val: /" v "/ is of unsupported type"))))) (defn encode [v] (js/JSON.stringify (json v))) (defn decode [s] (unjson (js/JSON.parse s)))], :preprocessing [{:type :tokenize/collection, :brace "(", :export? true, :defname "defn-impl$", :macro? "defmacro", :intent "defmacro", :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :content "preprocess"}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 106, :col-start 1, :content "defmacro", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 106, :col-start 10, :content "defn-impl$", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 106, :col-start 22, :content "arg-spec-placeholder", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 106, :col-start 43, :content "&", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 106, :col-start 45, :content "cases", :special ""}, :md nil}], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 106, :col-start 21, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 106, :col-start 50, :content "]", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 107, :col-start 3, :content "let", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 107, :col-start 8, :content "valsym", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 107, :col-start 16, :content "gensym", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/string, :row-start 107, :col-start 11, :content "val", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 107, :col-start 15, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 107, :col-start 0, :content ")", :special ""}} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 108, :col-start 8, :content "arg-spec", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 108, :col-start 18, :content "->>", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 108, :col-start 22, :content "arg-spec-placeholder", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 109, :col-start 23, :content "mapv", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 109, :col-start 29, :content "fn", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 109, :col-start 33, :content "form", :special ""}, :md nil}], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 109, :col-start 32, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 109, :col-start 37, :content "]", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 31, :content "let", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 36, :content "placeholder?", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 50, :content "and", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 55, :content "symbol?", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 63, :content "form", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 54, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 110, :col-start 67, :content ")", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 70, :content "=", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/string, :row-start 110, :col-start 12, :content "$", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 2, :content "name", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 110, :col-start 7, :content "form", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 1, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 110, :col-start 11, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 69, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 110, :col-start 12, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 49, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 110, :col-start 13, :content ")", :special ""}}], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 35, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 110, :col-start 14, :content "]", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 111, :col-start 33, :content "if", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 111, :col-start 36, :content "placeholder?", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 111, :col-start 49, :content "valsym", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 111, :col-start 56, :content "form", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 111, :col-start 32, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 111, :col-start 60, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 110, :col-start 30, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 111, :col-start 61, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 109, :col-start 28, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 111, :col-start 62, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 109, :col-start 22, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 111, :col-start 63, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 108, :col-start 17, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 111, :col-start 64, :content ")", :special ""}} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 112, :col-start 8, :content "spec", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 112, :col-start 14, :content "->>", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 112, :col-start 18, :content "cases", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 19, :content "reduce", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod "#", :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 28, :content "assoc", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 34, :content "%1", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 38, :content "first", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 44, :content "%2", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 113, :col-start 37, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 46, :content ")", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod "`", :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 50, :content "fn", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 113, :col-start 53, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 54, :content "]", :special ""}} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 56, :content "", :special "~@"}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 59, :content "drop", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/number, :row-start 113, :col-start 64, :content "1", :number 1, :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 113, :col-start 66, :content "%2", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 113, :col-start 58, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 68, :content ")", :special ""}}], :open-token {:brace "(", :mod "`", :type :tokenize/collection-open, :row-start 113, :col-start 48, :content "`(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 69, :content ")", :special ""}}], :open-token {:brace "(", :mod "#", :type :tokenize/collection-open, :row-start 113, :col-start 26, :content "#(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 70, :content ")", :special ""}} {:md nil, :type :tokenize/collection, :brace "{", :mod nil, :children [], :open-token {:brace "{", :mod nil, :type :tokenize/collection-open, :row-start 113, :col-start 72, :content "{", :special ""}, :close-token {:brace "{", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 73, :content "}", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 113, :col-start 18, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 74, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 112, :col-start 13, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 75, :content ")", :special ""}}], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 107, :col-start 7, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 113, :col-start 76, :content "]", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod "`", :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 6, :content "arg-spec", :special "~"}, :md nil} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 17, :content "let", :special ""}, :md nil} {:md nil, :type :tokenize/collection, :brace "[", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 22, :content "$", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 24, :content "valsym", :special "~"}, :md nil}], :open-token {:brace "[", :mod nil, :type :tokenize/collection-open, :row-start 114, :col-start 21, :content "[", :special ""}, :close-token {:brace "[", :mod nil, :type :tokenize/collection-close, :row-start 114, :col-start 31, :content "]", :special ""}} {:md nil, :type :tokenize/collection, :brace "(", :mod nil, :children [{:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 34, :content "coll-impl", :special ""}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 44, :content "spec", :special "~"}, :md nil} {:type :tokenize/leaf, :token {:type :tokenize/identifier, :row-start 114, :col-start 50, :content "$", :special ""}, :md nil}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 114, :col-start 33, :content "(", :special ""}, :close-token {:brace "(", :mod "$", :type :tokenize/collection-close, :row-start 114, :col-start 51, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 114, :col-start 16, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 114, :col-start 52, :content ")", :special ""}}], :open-token {:brace "(", :mod "`", :type :tokenize/collection-open, :row-start 114, :col-start 4, :content "`(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 114, :col-start 53, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 107, :col-start 2, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 114, :col-start 54, :content ")", :special ""}}], :open-token {:brace "(", :mod nil, :type :tokenize/collection-open, :row-start 106, :col-start 0, :content "(", :special ""}, :close-token {:brace "(", :mod nil, :type :tokenize/collection-close, :row-start 114, :col-start 55, :content ")", :special ""}}]}]}}